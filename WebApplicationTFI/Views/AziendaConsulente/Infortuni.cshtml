
@{
    ViewBag.Title = "Infortuni";
    Layout = "~/Views/Shared/_AziendaConsulenteLayout.cshtml";
}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />

<style>
    .table td {
        vertical-align: middle;
    }

    .table thead th {
        vertical-align: middle;
        text-align: center;
    }

    .input-group > .form-control {
        border-color: #0c773c;
       margin-right:10px;
    }

    .cancelBtn {
        visibility: hidden;
    }

        .cancelBtn::after {
            content: 'Esci';
            visibility: visible;
            background-color: #0c773c;
            color: white;
            border: 1px solid black;
            padding: 5px 10px 5px 10px;
        }

    .applyBtn {
        visibility: hidden;
    }

        .applyBtn::after {
            content: 'Applica';
            background-color: #0c773c;
            color: white;
            width: 10px;
            visibility: visible;
            padding: 5px 10px 5px 10px;
        }

    .daterangepicker td.active, .daterangepicker td.active:hover {
        background-color: #0c773c;
    }
</style>

<div class="card" style="background-color:white">
    <div class="card-body">
        <div class="input-group">
            <div class="form-group" style="margin-left:50px">
                <label>Matricola:</label>
                <div class="input-group">
                    <input class="form-control" id="searchMat" placeholder="Ricerca per matricola..." autocomplete="off" autofocus>
                </div>
            </div>
            <div class="form-group">
                <label>Nominativo:</label>
                <div class="input-group">
                    <input class="form-control" id="search" placeholder="Ricerca per nominativo..." autocomplete="off" autofocus>
                </div>
            </div>

            <div class="form-group">
                <label>Periodo data infortunio:</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text" style="background:#0c773c;color:white">
                            <i class="far fa-calendar-alt"></i>
                        </span>
                    </div>
                    <input type="text" class="form-control float-right" id="reservation">
                </div>
            </div>
            <div class="form-group">
                <label>Periodo data denuncia:</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text" style="background:#0c773c;color:white">
                            <i class="far fa-calendar-alt"></i>
                        </span>
                    </div>
                    <input type="text" class="form-control float-right" id="reservation1">
                </div>
            </div>
            <div class="form-group">
                <label>Stato Infortunio:</label>
                <div class="input-group">
                    <input class="form-control" id="searchAzienda" placeholder="Ricerca per infortunio..." autocomplete="off" autofocus>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div style="background-color: #0c773c" class="card-header">
        <h3 style="color:white;text-align:center;width:100%;font-size:25px" class="card-title">Lista Infortuni Denunciati</h3>
    </div>
    <div class="card-body">
        <table id="table" style="text-align:center" class="table table-hover table-striped">
            <thead>
                <tr class="header" style="background:#0c773c;color:white">
                    <th>Matricola</th>
                    <th>Nominativo Iscritto</th>
                    <th>Id Infortunio</th>
                    <th>Descrizione</th>
                    <th>Data infortunio</th>
                    <th>Data denuncia infortunio</th>
                    <th>Stato</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr style="vertical-align:middle;text-align:center">
                    <td>20</td>
                    <td>Francesco Guarracino</td>
                    <td>5</td>
                    <td>A</td>
                    <td>06/07/2006</td>
                    <td>06/07/2006</td>
                    <td>In corso</td>
                    <td><a type="button" class=" btn  btn-outline-secondary btn-lg " href='@Url.Action("DettaglioInfortuni", "AziendaConsulente")' /> Dettaglio</td>
                </tr>
                <tr style="vertical-align:middle;text-align:center">
                    <td>19</td>
                    <td>Davide Lizzeri</td>
                    <td>18</td>
                    <td>A</td>
                    <td>06/07/2006</td>
                    <td>06/07/2006</td>
                    <td>Ricoverato</td>
                    <td><a type="button" class=" btn  btn-outline-secondary btn-lg " href='@Url.Action("DettaglioInfortuni", "AziendaConsulente")' /> Dettaglio</td>
                </tr>
                <tr style="vertical-align:middle;text-align:center">
                    <td>25</td>
                    <td>Marco Nisticò</td>
                    <td>10</td>
                    <td>A</td>
                    <td>06/07/2006</td>
                    <td>06/07/2006</td>
                    <td>In corso</td>
                    <td><a type="button" class=" btn  btn-outline-secondary btn-lg " href='@Url.Action("DettaglioInfortuni", "AziendaConsulente")' /> Dettaglio</td>
                </tr>
                <tr style="vertical-align:middle;text-align:center">
                    <td>80</td>
                    <td>Lanfranco Romei</td>
                    <td>20</td>
                    <td>A</td>
                    <td>06/07/2006</td>
                    <td>06/07/2006</td>
                    <td>Guarito</td>
                    <td><a type="button" class=" btn  btn-outline-secondary btn-lg " href='@Url.Action("DettaglioInfortuni", "AziendaConsulente")' /> Dettaglio</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<script>
    $(function () {
        $('#search').on('input', function () {
            searchRow();
        });
        $('#searchMat').on('input', function () {
            searchRow();
        });
        $('#searchAzienda').on('input', function () {
            searchRow();
        });

    })
    function searchRow() {
        var $rows = $('#table > tbody > tr').not(".header");
        var val1 = $.trim($('#search').val()).replace(' ').toLowerCase();
        var val3 = $.trim($('#searchMat').val()).replace(' ').toLowerCase();
        var val4 = $.trim($('#searchAzienda').val()).replace(' ').toLowerCase();
      

        $rows.show().filter(function () {
            var text1 = $(this).find('td:nth-child(2)').text().replace(' ').toLowerCase();
            var text3 = $(this).find('td:nth-child(1)').text().replace(' ').toLowerCase();
            var text4 = $(this).find('td:nth-child(7)').text().replace(' ').toLowerCase();
            return !~text1.indexOf(val1) || !~text3.indexOf(val3) || !~text4.indexOf(val4);
        }).hide();
    }
   
</script>

<script>
    $(function () {
        //Date range picker
        $('#reservation').daterangepicker();
    })
</script>
<script>
    $(function () {
        //Date range picker
        $('#reservation1').daterangepicker();
    })
</script>
